var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,r=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,l=(e,l)=>{for(var o in l||(l={}))t.call(l,o)&&r(e,o,l[o]);if(a)for(var o of a(l))n.call(l,o)&&r(e,o,l[o]);return e};import{c as o,a as c,r as i,T as s,j as m,m as p,b as d,u,C as h,d as E,A as f,L as g,e as _,F as v,f as y,B as b,g as S,h as w,i as B,k as x,l as A,n as I,I as k,M as D,D as U,o as P,G as C,p as O,S as L,q as N,H as R,R as $,s as j,t as T,P as M}from"./vendor.3c7e9b6e.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,l)=>{const o=new URL(e,n);if(self[t].moduleMap[o])return a(self[t].moduleMap[o]);const c=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(c),onerror(){l(new Error(`Failed to import: ${e}`)),r(i)},onload(){a(self[t].moduleMap[o]),r(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/vite-react/assets/");const F={token:"",name:""},z={menuList:[],openKey:"",openDrawer:!0};var q=c(o({userInfo:(e=F,t)=>{switch(t.type){case"UPDATE_USERINFO":return t.userInfo;case"RESET_USERINFO":return F;default:return e}},AppSlideBar:(e=z,t)=>{switch(t.type){case"UPDATE_APP_SLIDE_BAR":return l(l({},e),t.slideBarState);default:return e}}}));const W=e=>({userInfo:e,type:"UPDATE_USERINFO"}),K=e=>({slideBarState:e,type:"UPDATE_APP_SLIDE_BAR"}),V=function(){return i.createElement(s,{variant:"body2",color:"textSecondary",align:"center"},"Copyright © ",i.createElement("a",{color:"inherit",href:"https://github.com/happy-func/"},"Happy-func")," ",(new Date).getFullYear(),".")},Z=e=>t=>e.test(t),G=Z(/^[A-Za-z][a-zA-Z0-9_]{3,9}$/),H=Z(/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)])+$).{6,18}$/),Y={expires:7},J=()=>m.get("react_admin_token"),Q=p((e=>({paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}})));var X=d((()=>({})),(e=>({doUpdateUserInfo:t=>e(W(t))})))((({doUpdateUserInfo:e})=>{const t=u(),a=Q(),[n,r]=i.useState(!1),[l,o]=i.useState(""),[c,p]=i.useState("");return i.useEffect((function(){const e=localStorage.getItem("remember_user_name");o(e||""),r(!!e)}),[]),i.createElement(h,{component:"main",maxWidth:"xs"},i.createElement(E,null),i.createElement("div",{className:a.paper},i.createElement(f,{className:a.avatar},i.createElement(g,null)),i.createElement(s,{component:"h1",variant:"h5"},"登 录"),i.createElement("form",{className:a.form,noValidate:!0},i.createElement(_,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"用户名",name:"username",autoComplete:"username",autoFocus:!0,value:l,onChange:function(e){const{target:{value:t}}=e;o(t)}}),i.createElement(_,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"密码",type:"password",id:"password",autoComplete:"current-password",value:c,onChange:function(e){p(e.target.value)}}),i.createElement(v,{control:i.createElement(y,{checked:n,onChange:function(e){r(e.target.checked)},value:"remember",color:"primary"}),label:"记住我"}),i.createElement(b,{fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:function(){if(!l)return w.error("请输入用户名");if(!G(l))return w.error("用户名仅支持数字、字母和下划线且只能以字母开头，长度在4到10之间");if(!c)return w.error("请输入密码");if(!H(c))return w.error("密码长度在6-18之间，至少包含数字、字母、特殊字符两种");n?localStorage.setItem("remember_user_name",l):localStorage.removeItem("remember_user_name");const a=Math.random().toString(16);var r;(e=>{m.set("react_admin_token",e,Y)})(a),r=l,m.set("admin_name",r,Y),e({name:l,token:a}),t.push("/dashBord")}},"登 录"))),i.createElement(S,{mt:8},i.createElement(V,null)))}));var ee="_title_1f8t9_1";const te=p((e=>B({appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),zIndex:1201},appBarShift:{width:"calc(100% - 240px)",marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36}})));var ae=d((e=>({AppSlideBar:e.AppSlideBar})),(e=>({doUpdateAppSlideBar:t=>e(K(t))})))((function({AppSlideBar:e,doUpdateAppSlideBar:t}){const a=te();return i.createElement(x,{position:"fixed",className:A(a.appBar,{[a.appBarShift]:e.openDrawer})},i.createElement(I,null,i.createElement(k,{color:"inherit","aria-label":"open drawer",onClick:function(){t(l(l({},e),{openDrawer:!e.openDrawer}))},edge:"start",className:A(a.menuButton)},i.createElement(D,null)),i.createElement(s,{variant:"h6",noWrap:!0,className:ee})))}));var ne="_menu_1opbs_1",re="_asideTitle_1opbs_15",le="_fixedMenu_1opbs_24",oe="_tinyMenu_1opbs_31";let ce;const ie={},se=function(e,t){if(!t)return e();if(void 0===ce){const e=document.createElement("link").relList;ce=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in ie)return;ie[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":ce,t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e()))},me=function({children:e}){return i.createElement(i.Fragment,null,e)},pe=[{name:"DashBord",path:"/dashBord",exact:!0,component:i.lazy((()=>se((()=>__import__("./index.1c80c1ca.js")),["/vite-react/assets/index.1c80c1ca.js","/vite-react/assets/index.85c2d204.css","/vite-react/assets/vendor.3c7e9b6e.js"]))),meta:{icon:i.createElement(U,null),title:"控制台"}},{name:"AccountManage",path:"/accountManage",exact:!0,component:i.lazy((()=>se((()=>__import__("./index.2956c73b.js")),void 0))),meta:{icon:i.createElement(P,null),title:"账号管理"}},{name:"Child",path:"/child",exact:!0,component:me,meta:{icon:i.createElement(C,null),title:"测试子级"},children:[{name:"ChildEl",path:"/child",exact:!1,component:i.lazy((()=>se((()=>__import__("./Child.b05ddd9b.js")),void 0))),meta:{title:"子页面"}},{name:"ChildEmpty",path:"/deep",exact:!1,component:me,meta:{title:"深层"},children:[{name:"DeepChildren",path:"/page",exact:!1,component:i.lazy((()=>se((()=>__import__("./Deep.a7e72e9a.js")),void 0))),meta:{title:"嵌套"}}]}]}],{SubMenu:de}=O;var ue=d((e=>({AppSlideBar:e.AppSlideBar})),(e=>({doUpdateAppSlideBar:t=>e(K(t))})))((function({AppSlideBar:e,doUpdateAppSlideBar:r}){const o=u();const c=e=>{var r,{route:o}=e,s=((e,r)=>{var l={};for(var o in e)t.call(e,o)&&r.indexOf(o)<0&&(l[o]=e[o]);if(null!=e&&a)for(var o of a(e))r.indexOf(o)<0&&n.call(e,o)&&(l[o]=e[o]);return l})(e,["route"]);return(null==(r=o.children)?void 0:r.length)?i.createElement(de,l({title:o.meta.title,key:o.name,icon:o.meta.icon||i.createElement("div",null)},s),o.children.map((e=>i.createElement(c,{route:e,key:e.name})))):i.createElement(O.Item,l({key:o.name,icon:o.meta.icon||i.createElement("div",null)},s),o.meta.title)};return i.createElement("div",{style:{width:240,height:"100vh"},className:e.openDrawer?"":oe},i.createElement("div",{className:`${le} ${e.openDrawer?"":oe}`,style:{width:240,height:"100vh"}},i.createElement("div",{className:re},e.openDrawer&&"SYSTEM 管理后台"),i.createElement(O,{theme:"dark",className:ne,mode:"inline",defaultSelectedKeys:["DashBord"],onSelect:function(t){const{key:a}=t;if(e.openKey!==a){r(l(l({},e),{openKey:a}));const t=function e(t,n=""){var r;let l="";for(const o of t){if(o.name===a)return n+o.path;(null==(r=o.children)?void 0:r.length)&&(l=e(o.children,n+o.path))}return l}(pe);o.push(t||"dashBord")}else r(l(l({},e),{openKey:""}))},inlineCollapsed:!e.openDrawer},pe.map((e=>i.createElement(c,{route:e,key:e.name}))))))}));const he=p((e=>({root:{display:"flex"},content:{flexGrow:1,padding:e.spacing(3),position:"relative"},toolbar:l({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar)}))),Ee=({children:e})=>{const t=he();return i.createElement("div",{className:t.root},i.createElement(ae,null),i.createElement(ue,null),i.createElement("div",{className:t.content},i.createElement("div",{className:t.toolbar}),e))};var fe="_loadingBox_qqgg2_1";const ge=function(e){return e.error?i.createElement("div",null,"加载失败! ",i.createElement("button",{onClick:e.retry},"重新加载")):i.createElement("div",{className:fe},i.createElement(L,{size:"large"}))};var _e=d((e=>({userInfo:e.userInfo})),(e=>({doUpdateUserInfo:t=>e(W(t))})))((({userInfo:e,doUpdateUserInfo:t})=>{const a=u();i.useEffect((()=>{e.token||(J()?t({name:m.get("admin_name"),token:J()}):a.push("/login"))}),[e.token]);const n=({route:e,parentPath:t})=>{var a;return i.createElement(i.Fragment,null,i.createElement($,{path:`${t||""}${e.path}`,component:e.component,exact:!!e.exact}),!!(null==(a=e.children)?void 0:a.length)&&e.children.map((a=>i.createElement(n,{key:a.name,route:a,parentPath:`${t||""}${e.path}`}))))};return i.createElement(Ee,null,i.createElement(i.Suspense,{fallback:i.createElement(ge,null)},i.createElement(N,null,i.createElement(R,null,i.createElement($,{path:"/",exact:!0},i.createElement(j,{to:"/dashBord"})),pe.map((e=>i.createElement(n,{key:e.name,route:e})))))))}));const ve=()=>i.createElement(R,null,i.createElement(N,null,i.createElement($,{path:"/login"},i.createElement(X,null)),i.createElement($,{path:"/"},i.createElement(_e,null)))),ye=()=>i.createElement(ve,null);T.render(i.createElement(i.Fragment,null,i.createElement(M,{store:q},i.createElement(ye,null))),document.getElementById("root"));
